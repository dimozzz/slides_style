\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{slides-tikz}

\RequirePackage{tikz}
\RequirePackage{pgfplots}
\RequirePackage{wrapfig}
\RequirePackage{subfig}
\RequirePackage{tikzpeople}



\usetikzlibrary{
	arrows,
	calc,
	patterns,
	intersections,
    backgrounds,
    trees,
    mindmap,
	decorations.pathreplacing,
	decorations.pathmorphing,
	decorations.text,
	decorations.markings,
    scopes,
	shapes,
    snakes,
	positioning,
}


\pgfplotsset{compat = newest}



\tikzstyle{dotnode} = [draw, fill, inner sep = 0pt, minimum size = 1mm, circle]

\tikzstyle{termnode} = [draw, fill = white, inner sep = 0pt, minimum size = 1.5mm, circle]


\pgfdeclaredecoration{pencildec}{initial}{
	\state{initial}[
    	width = +\pgfdecoratedinputsegmentremainingdistance,
	    auto corner on length = 1mm
    ]{
    	\pgfpathcurveto{
        	\pgfqpoint{\pgfdecoratedinputsegmentremainingdistance}
            	{\pgfdecorationsegmentamplitude}
        }{
        	\pgfmathrand
	        \pgfpointadd{
            	\pgfqpoint{\pgfdecoratedinputsegmentremainingdistance}{0pt}
            }{
            	\pgfqpoint{
                	-\pgfdecorationsegmentaspect
                    \pgfdecoratedinputsegmentremainingdistance
                }{
                	\pgfmathresult\pgfdecorationsegmentamplitude
                }
            }
        }{
        	\pgfpointadd{\pgfpointdecoratedinputsegmentlast}{\pgfpoint{1pt}{1pt}}
        }
    }
    \state{final}{}
}

\tikzstyle{penciline} = [decorate, decoration = {pencildec}]

\tikzstyle{pencildraw} = [
	decorate,
    decoration = {
    	random steps,
    	segment length = 0.9pt,
        amplitude = 0.25pt
    }
]

\RequirePackage{etextools}

\makeatletter

% define a macro after current iteration
\newcommand\afteriterationdef[1]{\aftergroup@def#1}

% define a macro after foreach (and after iteration)
\newcommand\afterforeachdef[1]{\afteriterationdef{#1}\AfterGroup{\aftergroup@def#1}}

\makeatother

\newcommand{\defineop}[1]{
    \foreach \index in {1, ..., #1}{
%        \onslide<1->{
            \message{!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! op\index}
            \afterforeachdef\tikzstyle{op\index} = [opacity = 0]
 %       }
  %      \only<\index->{\tikzstyle{op\index} = [opacity = 1]}
    }
}

\newcommand{\definee}[1]{
    \tmp=0
    \loop
	    \advance\tmp by 1
    	\onslide<1->{
            \message{!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! op\index}
			\tikzstyle{op\index} = [opacity = 0]
        }
        \only<\index->{\tikzstyle{op\index} = [opacity = 1]}
        \ifnum\tmp<#1
    \repeat
}

\endinput
